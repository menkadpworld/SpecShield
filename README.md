# SpecShield Implementation

## Overview
SpecShield is a Spring Boot application that executes API tests based on Swagger specifications and provides detailed reporting capabilities.

## Features
- **Test Execution**: Executes test suites with parallel processing grouped by URL
- **MongoDB Integration**: Stores test results and reports
- **REST API**: Provides endpoints for test execution and report retrieval
- **Docker Support**: Containerized application with MongoDB

## Architecture

### Services
1. **IExecutorService**: Executes test cases with parallel processing
2. **IReportCollector**: Retrieves and formats test reports

### Key Components
- **Test Models**: TestSuite, TestCase, Endpoint, Request, Expected, Assertion
- **Result Models**: TestResult, TestExecution, TestReportResponse
- **Repository**: TestResultRepository for MongoDB operations

## API Endpoints

### Execute Test Suite
```
POST /specshield/api/execute
Content-Type: application/json

{
  "testSuiteName": "CustomerService_AutoGenerated",
  "id": "CustomerService_AutoGenerated_1",
  "baseURL": "http://localhost:8080",
  "testCases": [
    {
      "testCaseId": "TC001",
      "testType": "happypath",
      "endpoint": {
        "method": "GET",
        "url": "/customers"
      },
      "request": {
        "headers": {
          "Content-Type": "application/json"
        }
      },
      "expected": {
        "statusCode": 200,
        "assertions": [
          {
            "jsonPath": "$.customers",
            "condition": "NOT_EMPTY"
          }
        ]
      }
    }
  ]
}
```

### Get Report
```
GET /specshield/api/report/{reportId}
```

## Parallel Processing
Tests are grouped by base URL and executed in parallel groups for optimal performance:
- Each URL group runs in its own CompletableFuture
- Tests within the same group execute sequentially
- Different URL groups execute concurrently

## Running the Application

### Using Docker Compose
```bash
# Build and start the application with MongoDB
docker-compose up --build

# Access the application
curl http://localhost:9000/specshield/api/execute
```

### Local Development
1. Start MongoDB locally on port 27017
2. Run the Spring Boot application
3. Application will be available at http://localhost:9000

## Configuration
- **Port**: 9000
- **Context Path**: /specshield
- **MongoDB**: Configurable via SPRING_DATA_MONGODB_URI environment variable

## Dependencies
- Spring Boot 4.0.0
- Spring Data MongoDB
- Spring WebFlux (for HTTP client)
- JsonPath (for JSON assertions)
- Lombok (for reducing boilerplate code)